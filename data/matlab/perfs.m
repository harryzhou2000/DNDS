hold on;

%% 

d.machine = 'gs';
d.case = 'test_Euler_.UniformRT512_Tri_RR2_TW10_Nolim';
d.commit = '3810dd9592bcf2fb1641edfe80d8128db7f72797';
d.testLen = '10 internal';
d.ncpu = [1 2 4 8 16 32]; 
d.t = [ ...
    mean([11.678, 11.514]),...
    mean([6.034,5.852,5.853]),...
    mean([2.987,2.962,2.972,2.918,2.915]),...
    mean([1.517,1.475,1.512,1.509]),...
    mean([0.869,0.761,0.760,0.761,0.760,0.792]),...
    mean([0.452,0.447,0.402,0.409,0.419,0.409])
    ];

spvflop = 10./(d.ncpu.*d.t);

plot(d.ncpu,spvflop/spvflop(1),'d','DisplayName','Nolim GPU704');
set(gca,'XScale','log');
ylim([0,inf]);
fprintf("%s::::%s, 1 core spvflop %g\n", d.machine, d.case, spvflop(1));


%% 

d.machine = 'TH2B';
d.case = 'test_Euler_.UniformRT512_Tri_RR2_TW10_Nolim';
d.commit = '3810dd9592bcf2fb1641edfe80d8128db7f72797';
d.testLen = '10 internal';
d.ncpu = [1 2 4 8 16 1*24 2*24 4*24 8*24 16*24]; 
d.t = [ ...
    mean([34.491, 34.586,34.566,34.617]),...
    mean([17.726, 17.854 ,17.660,17.660]),...
    mean([9.340,9.315,9.504,9.286]),...
    mean([4.961,4.968,4.967,4.974]),...
    mean([2.647,2.644,2.643,2.638]),...
    mean([1.746,1.741,1.766,1.739]),...
    mean([0.909,0.897,0.898,0.899]),...
    mean([0.457,0.459,0.462,0.461]),...
    mean([0.252,0.252,0.250,0.249]),...
    mean([0.147,0.145,0.145,0.143])
    ];

spvflop = 10./(d.ncpu.*d.t);

plot(d.ncpu,spvflop/spvflop(1),'+','DisplayName','NoLim TH2B');
set(gca,'XScale','log');
ylim([0,inf]);
fprintf("%s::::%s, 1 core spvflop %g\n", d.machine, d.case, spvflop(1));

%% 

d.machine = 'TH2B';
d.case = 'test_Euler_.UniformRT512_Tri_New_RR2_TW10_FullLim';
d.commit = '3810dd9592bcf2fb1641edfe80d8128db7f72797';
d.testLen = '10 internal';
d.ncpu = [1 2 4 8 16 1*24 2*24 4*24 8*24 16*24,32*24]; 
d.t = [ ...
    mean([120.999, 120.592,120.596,120.564]),...
    mean([63.988, 63.935 ,63.464,63.747]),...
    mean([32.806,32.896,32.657,32.999]),...
    mean([17.935,17.886,17.860,17.867]),...
    mean([9.158,9.159,9.161,9.161]),...
    mean([6.125,6.142,6.139,6.123]),...
    mean([3.066,3.066,3.065,3.063]),...
    mean([1.537,1.541,1.538,1.536]),...
    mean([0.782,0.783,0.780,0.780]),...
    mean([0.421,0.422,0.421,0.421]),...
    mean([0.252,0.252,0.252,0.251])
    ];

spvflop = 10./(d.ncpu.*d.t);

plot(d.ncpu,spvflop/spvflop(1),'x','DisplayName','FullLim TH2B');
set(gca,'XScale','log');
ylim([0,inf]);
fprintf("%s::::%s, 1 core spvflop %g\n", d.machine, d.case, spvflop(1));

%%
legend('Location','best');
